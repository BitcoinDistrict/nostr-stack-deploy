# Default, non-sensitive configuration values. Overridable via environment or configs/${DEPLOY_ENV}.env

# --- Relay (Strfry) ---
DOMAIN=relay.localhost
CERTBOT_EMAIL=noreply@localhost
CLOUDFLARE_ENABLED=true
# CLOUDFLARE_API_TOKEN is intentionally blank here; provide via CI secrets or server env

# --- Dashboard ---
DASHBOARD_ENABLED=false
DASHBOARD_DOMAIN=nostr.localhost

# --- Blossom ---
BLOSSOM_ENABLED=false
BLOSSOM_DOMAIN=blossom.localhost
BLOSSOM_CONTAINER_IMAGE=ghcr.io/hzrd149/blossom-server:master
BLOSSOM_PORT=3300
BLOSSOM_MAX_UPLOAD_MB=16
BLOSSOM_GATE_MODE=open
BLOSSOM_ALLOWLIST_FILE=/etc/blossom/allowlist.txt

# --- Nostr Auth Proxy ---
NOSTR_AUTH_ENABLED=true
NOSTR_AUTH_PORT=3310
NOSTR_AUTH_GATE_MODE=open
NOSTR_AUTH_ALLOWLIST_FILE=
NOSTR_AUTH_CACHE_TTL_SECONDS=300
NOSTR_AUTH_LOG_LEVEL=info
# If set and X-NIP05 header is absent, require that signer is verified on this domain
NOSTR_AUTH_REQUIRED_NIP05_DOMAIN=localhost

# --- Strfry NIP-05 gate (plugin) ---
# Comma-separated list of nostr.json endpoints to allow (npub or hex allowed in names map)
NIP05_JSON_URLS=http://localhost/.well-known/nostr.json
# TTL for the allowlist cache inside the plugin
NIP05_CACHE_TTL=300
# Allow Import/Sync/Stream sources regardless of NIP-05 gate (false recommended)
ALLOW_IMPORT=false

# Event kinds allowed without NIP-05 verification (comma-separated list)
# Default includes: user metadata, contacts, deletions, reactions, zaps, relay lists, auth
ALLOWED_KINDS_NO_NIP05=0,3,5,7,9734,9735,10002,22242

# Ephemeral kind 20000-29999 rate limiting (per pubkey)
# Tokens refilled per second and maximum burst size used by the plugin
EPHEMERAL_RATE=2.0
EPHEMERAL_BURST=10


